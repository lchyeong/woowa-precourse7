## **로또 발매기**

**작성자 :** 이찬형  
**프로젝트** : 우아한 테크코스 프리코스 7기 - 3주차 과제
&nbsp;

## 📋 목차

- [📌 프로젝트 소개](#-프로젝트-소개)
- [📂 프로젝트 구조](#-프로젝트-구조)
- [🚀 기능](#-기능)
- [🖥️ 입출력 예시](#-입출력-예시)
    - [입력](#입력)
    - [출력](#출력)
    - [실행 결과 예시](#실행-결과-예시)
- [🚨 예외 사항](#-예외-사항)
    - [구입 금액 입력 오류](#구입-금액-입력-오류)
    - [당첨/보너스 번호 입력 오류](#당첨보너스-번호-입력-오류)
    - [예외가 아닌 상황](#예외가-아닌-상황)
- [🤔 회고](#-회고)

## 📌 **프로젝트 소개**

**로또 발매기는 사용자가 입력한 금액에 따라 로또를 구매하고, 랜덤으로 생성된 로또 번호의 당첨 여부를 확인하는 프로젝트입니다.**

![Java Version](https://img.shields.io/badge/Java-21-blue?style=for-the-badge)  ![Gradle](https://img.shields.io/badge/build%20with-Gradle-green?style=for-the-badge)  
&nbsp;

## 📂 **프로젝트 구조**

⚠️ 아래 구조는 지속적으로 수정/보완될 예정입니다!

```
└── src
    ├── main
    │   └── java
    │       └── lotto
    │           ├── Application.java
    │           ├── config
    │           │   └── AppConfig.java
    │           ├── controller
    │           │   └── LottoController.java
    │           ├── model
    │           │   ├── Lotto.java
    │           │   └── PrizeTable.java
    │           ├── service
    │           │   ├── InputService.java
    │           │   └── LottoService.java
    │           ├── validator
    │           │   ├── NumberParser.java
    │           │   ├── NumberValidator.java
    │           │   └── PurchaseValidator.java
    │           └── view
    │               ├── InputView.java
    │               └── OutputView.java
    └── test
        └── java
            └── lotto
                ├── ApplicationTest.java
                ├── model
                │   ├── LottoTest.java
                │   └── PrizeTableTest.java
                ├── service
                │   └── LottoServiceTest.java
                └── validator
                    ├── NumberParserTest.java
                    ├── NumberValidatorTest.java
                    └── PurchaseValidatorTest.java
├──README.md
├──build.gradle
```

&nbsp;

## 🚀 **기능**

### 구매 금액 입력 및 검증

- **구입 금액 입력**: 구입 금액은 1,000원 단위로 입력할 수 있으며, 로또 1장의 가격은 1,000원입니다.
- **최대 구매 금액**: 도박 중독 방지를 위하여 로또 최대 구매 금액은 10억으로 제한합니다.
- **잘못된 값 입력**: [ERROR]로 시작하는 에러 메시지를 출력하고, 다시 입력을 받습니다. 자세한 예외 사항은 [구입 금액 입력 오류](#구입-금액-입력-오류)를 참고하세요.

### 로또 발매

- **번호 발급**: 중복되지 않는 1부터 45 사이의 랜덤한 숫자 6개를 가진 로또를 발급합니다.
- **수량 일치**: 입력한 구매 금액을 로또 가격(1,000원)으로 나눈 개수만큼 로또를 발급합니다.

### 당첨/보너스 번호 입력 및 검증

- **번호의 범위**: 당첨 및 보너스 번호는 모두 1부터 45 사이의 정수여야 합니다.
- **당첨 번호 입력**: 6개의 당첨 번호를 쉼표(,)로 구분하여 입력받습니다.
- **보너스 번호 입력**: 한 개의 보너스 번호를 입력받습니다. 당첨 번호와 중복시 에러가 발생합니다.
- **잘못된 값 입력**: [ERROR]로 시작하는 에러 메시지를 출력하고, 다시 입력을 받습니다. 자세한 예외 사항은 [당첨/보너스 번호 입력 오류](#당첨보너스-번호-입력-오류)를 참고하세요.

### 당첨 기준과 금액 확인

- **당첨 카운트**: 구매한 로또의 당첨 번호를 확인하여 당첨 기준에 맞게 카운트합니다.
- **총 당첨 금액 계산**: 당첨 카운트를 확인해 총 당첨 금액을 계산합니다.
- **수익률 계산**: 구매 금액 대비 당첨 금액의 수익률을 계산합니다.

**번호 일치 개수별 당첨 금액**은 다음과 같습니다:

```
1등: 6개 번호 일치 / 2,000,000,000원  
2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원  
3등: 5개 번호 일치 / 1,500,000원  
4등: 4개 번호 일치 / 50,000원  
5등: 3개 번호 일치 / 5,000원
```

### 출력 처리

- **구매 로또 출력**: 발행한 로또 번호를 모두 출력합니다. 로또 번호는 오름차순으로 정렬하며, 쉼표(,)로 구분하여 출력합니다.
- **당첨 통계 출력**: 당첨 기준에 따라 통계를 출력합니다.
- **수익률 출력**: 수익률은 소수점 둘째 자리에서 반올림하여 출력합니다.
- **예외 사항 출력**: 예외 사항 발생 시 [ERROR]로 시작하는 에러 메시지를 출력합니다.

&nbsp;

## 🖥️ **입출력 예시**

### **입력**

- 로또 구입 금액을 입력 받는다. 구입 금액은 1,000원 단위로 입력 받으며 1,000원으로 나누어 떨어지지 않는 경우 예외 처리한다.

```
14000
```

- 당첨 번호를 입력 받는다. 번호는 쉼표(,)를 기준으로 구분한다.

```
1,2,3,4,5,6
```

- 보너스 번호를 입력 받는다.

```
7
```

### **출력**

- 발행한 로또 수량 및 번호를 출력한다. 로또 번호는 오름차순으로 정렬하여 보여준다.

```
8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]
```

- 당첨 내역을 출력한다.

```
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
```

- 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%)

```
총 수익률은 62.5%입니다.
```

- 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작해야 한다.

```
[ERROR] 로또 번호는 1부터 45 사이의 숫자여야 합니다.
```

### **실행 결과 예시**

```
구입금액을 입력해 주세요.
8000

8개를 구매했습니다.
[8, 21, 23, 41, 42, 43] 
[3, 5, 11, 16, 32, 38] 
[7, 11, 16, 35, 36, 44] 
[1, 8, 11, 31, 41, 42] 
[13, 14, 16, 38, 42, 45] 
[7, 11, 30, 40, 42, 43] 
[2, 13, 22, 32, 38, 45] 
[1, 3, 5, 14, 22, 45]

당첨 번호를 입력해 주세요.
1,2,3,4,5,6

보너스 번호를 입력해 주세요.
7

당첨 통계
---
3개 일치 (5,000원) - 1개
4개 일치 (50,000원) - 0개
5개 일치 (1,500,000원) - 0개
5개 일치, 보너스 볼 일치 (30,000,000원) - 0개
6개 일치 (2,000,000,000원) - 0개
총 수익률은 62.5%입니다.
```

&nbsp;

## 🚨 **예외 사항**

다음과 같은 경우 **예외**가 발생할 수 있습니다!

### **구입 금액 입력 오류**

- 구입 금액이 1,000원 단위가 아닌 경우.
- 구입 금액이 1,000원 미만이거나, 양의 정수가 아닌 경우.
- 구입 금액에 숫자가 아닌 값이 입력된 경우.
- 구입 금액이 10억 이상인 경우.

### **당첨/보너스 번호 입력 오류**

- 당첨 번호가 1부터 45 사이의 정수가 아닌 경우.
- 숫자가 아닌 값이 입력된 경우.
- 양의 정수가 아닌 경우.
- 보너스 번호가 당첨 번호에 포함된 경우.
- 쉼표(,) 사이에 값이 없거나 공백(space)이 포함된 경우.  
  ex)`1,2,3,,4,5,6`

예외 발생 시, `[ERROR]`로 시작하는 오류 메시지를 출력하고 다시 입력을 받습니다.

### 예외가 아닌 상황

- 구입 금액 앞, 뒤, 혹은 사이에 공백(space)이 포함된 경우. ex)`10 0 0`
- 번호 입력 앞, 뒤, 혹은 사이에 공백(space)이 포함된 경우. ex)`1, 2,3 ,4 ,5, 6`
- 번호 입력 마지막에 쉼표(,) 이후 공백(space)이 포함된 경우. ex)`1,2,3,4,5,6,`
- 동일한 번호의 로또가 여러 장 발매된 경우.

&nbsp;

## 🤔 **회고**

이번 프로젝트에서 가장 중점적으로 고려했던 부분은 관련 `함수들의 구조화`였습니다. 각 기능이 어디에 속해야 하는지, 어떤 행위를 담당해야 하는지를 많이 고민했습니다.   
특히, 의존성 주입을 AppConfig를 통해 관리하는 방식이 인상 깊었는데 이 부분은 타 참여자들의 리뷰를 통해 알게 되었고 이번 프로젝트에 적용해보았습니다.

2주차 공통피드백에서 리드미 관련 언급이 있어던 점이 흥미로웠는데 제가 2주차 때 가장 신경을 많이 썼던 부분이기도 했었기 때문입니다.  
덕분에 잘 따라가고 있다는 생각도 들었던 것 같습니다. 리드미를 중간에 업데이트를 하긴 했지만 `살아있는 리드미`라 부를 만큼 자주 반영하지는 못했던 것 같습니다.

`구현 순서도 컨벤션이다`라는 피드백에 구현 순서를 다시 점검하면서 코딩 컨벤션을 준수하려고 노력했습니다. `변수명에 자료형을 사용하지 말라`는 피드백은 보고 아차 싶었습니다. 자료형만큼 직관적인 게 없다고
생각했었기 때문입니다. 하지만 곰곰히 생각해보니 프로젝트에 맞는 변수명이 들어가야한다는 것을 깨달았던 것 같습니다. 클래스부터 메서드까지 자연스러운 하나의 문장처럼 읽히게 함으로써 가독성을 높이는 방법이 있겠다는
생각이 들었고 최대한 반영하려고 노력했습니다.
`메서드는 15 라인을 넘지 마라`는 피드백은 최대한 반영해보며 성공적으로 적용할 수 있었습니다.

다음으로 중요하게 생각한 부분은 테스트 부분이었습니다. 다양한 예외사항을 고려하며 테스트를 진행하려고 하였고 케이스들이 현저히 늘어났습니다. 테스트 케이스가 늘어남에 따라 True 테스트와 False 테스트를
분리하기 위해 변수명을 잘 분리해야 케이스 추가에 따른 가독성이 좋아진다는 것도 깨달았습니다.  
단위 테스트를 통해 기능 단위로 테스트하는 방법을 익혔는데 이 과정에서 어떻게 하면 다른 함수에 종속적이지 않고 테스트를 할 수 있지에 대한 부분을 많이 생각했습니다. 이 흐름은 자연스럽게 책임 분리로 이어졌고 계속
언급하고 중요시되는 함수의 기능분리로 연결 되는 역할을 했던 것 같습니다.  
또한, 전체 테스트를 수행하면서 전역 값들이 각 테스트에 미치는 영향을 고려하게 되었고, 이를 통해 목데이터 사용, AfterEach와 BeforeEach를 통한 데이터 초기화의 중요성을 느꼈습니다.

로또 발매기 프로젝트에서는 수정이 유독 잦았는데 Enum으로 관리 할 것인지, 전역적으로 관리할 값들은 어떤 것들이고 어디서 관리할지 등 다양한 고민을 하다보니 시간이 정말 많이 소요된 것 같습니다.  
이번 프로젝터에서는 예외 관리를 전역적으로 하지 않았는데, 막상 다 만들고 보니 무슨 예외인지에 대한 가독성이 떨어진다고 판단해 과감히 삭제했습니다. 하지만, 추후 프로젝트가 확장되고 에러가 분산될 경우, 전역적인
예외 관리를 도입해야 할 시점이 오지 않을까라는 생각도 해봤습니다.

모든 요구사항을 만족하진 못했다고 생각하지만 최대한 노력했고 이번 프로젝트에서도 많이 배워간 시간이 되었던 것 같습니다. 책을 더 보고 다른 사람들의 생각을 들으며 인사이트를 넓히는 시간이 소중하다는 것을 느낀
3주차 였습니다.
&nbsp;