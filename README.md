## **편의점🏪**

**작성자 :** 이찬형  
**프로젝트** : 우아한 테크코스 프리코스 7기 - 4주차 과제
&nbsp;

## 📋 목차

- [📌 프로젝트 소개](#-프로젝트-소개)
- [📂 프로젝트 구조](#-프로젝트-구조)
- [🚀 기능](#-기능)
- [🖥️ 입출력 예시](#-입출력-예시)
    - [입력](#입력)
    - [출력](#출력)
    - [실행 결과 예시](#실행-결과-예시)
- [🚨 예외 사항](#-예외-사항)
    - [구입 금액 입력 오류](#구입-금액-입력-오류)
    - [당첨/보너스 번호 입력 오류](#당첨보너스-번호-입력-오류)
    - [예외가 아닌 상황](#예외가-아닌-상황)
- [🤔 회고](#-회고)

## 📌 **프로젝트 소개**

**구매자의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계사하고 안내하는 결제 시스템을 갖춘 편의점입니다.**

![Java Version](https://img.shields.io/badge/Java-21-blue?style=for-the-badge)  ![Gradle](https://img.shields.io/badge/build%20with-Gradle-green?style=for-the-badge)  
&nbsp;

## 📂 **프로젝트 구조**

⚠️ 아래 구조는 지속적으로 업데이트 될 예정입니다!

```
└── src
    ├── main
    │   ├── java
    │   │   └── store
    │   │       ├── Application.java
    │   │       ├── config
    │   │       │   ├── AppConfig.java
    │   │       │   └── DataInitializer.java
    │   │       ├── constants
    │   │       │   └── Delimiter.java
    │   │       ├── controller
    │   │       │   └── StoreController.java
    │   │       ├── entity
    │   │       │   ├── Product.java
    │   │       │   └── Promotion.java
    │   │       ├── exception
    │   │       │   ├── ApiException.java
    │   │       │   └── ErrorCode.java
    │   │       ├── file
    │   │       │   ├── InternalFile.java
    │   │       │   └── ResourceFileReader.java
    │   │       ├── repository
    │   │       │   ├── ProductRepository.java
    │   │       │   └── PromotionRepository.java
    │   │       ├── service
    │   │       │   ├── InputViewService.java
    │   │       │   ├── MembershipService.java
    │   │       │   ├── ProductService.java
    │   │       │   └── StoreService.java
    │   │       ├── util
    │   │       │   ├── DateUtil.java
    │   │       │   ├── FileUtil.java
    │   │       │   └── PurchaseProductParser.java
    │   │       ├── validator
    │   │       │   ├── DateValidator.java
    │   │       │   ├── PurchaseValidator.java
    │   │       │   └── YesNoValidator.java
    │   │       └── view
    │   │           ├── InputView.java
    │   │           ├── InventoryView.java
    │   │           └── OutputView.java
    │   └── resources
    │       ├── products.md
    │       └── promotions.md
    └── test
        └── java
            └── store
                ├── ApplicationTest.java
                ├── config
                │   └── DataInitializerTest.java
                ├── file
                │   ├── FileUtilTest.java
                │   └── ResourceFileReaderTest.java
                ├── product
                │   └── repository
                │       └── ProductRepositoryTest.java
                ├── validator
                │   └── PurchaseValidatorTest.java
                └── view
                    └── InventoryViewTest.java

    
├──README.md
├──build.gradle
```

&nbsp;

## 🚀 **기능**

### **입력**

- **구매할 상품, 수량 입력**
    - 구매할 상품과 수량을 입력합니다. 상품명, 수량은 하이픈(-)으로, 개별 상품은 대괄호([])로 묶어 쉼표(,)로 구분합니다.

```
[콜라-10],[사이다-3]
```

- **프로모션 적용 가능 상품**
    - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 그 수량만큼 추가 여부(Y/N)를 입력습니다.
    - Y: 증정 받을 수 있는 상품이 추가됩니다.
    - N: 증정 받을 수 있는 상품을 추가하지 않습니다.

```
Y
```

- **프로모션 재고 부족 시**
    - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부를 입력받습니다.
    - Y: 일부 수량에 대해 정가로 결제합니다.
    - N: 정가로 결제해야하는 수량만큼 제외한 후 결제를 진행합니다.

```
Y
```

- **멤버십 할인 적용 여부**
    - 멤버십 할인 적용 여부를 입력합니다.
    - Y: 멤버십 할인을 적용합니다.
    - N: 멤버십 할인을 적용하지 않습니다.

```
N
```

- **추가 구매 여부**
    - 추가 구매 여부를 입력합니다.
    - Y: 재고가 업데이트된 상품 목록을 확인 후 추가로 구매를 진행합니다.
    - N: 구매를 종료합니다.

```
N
```

- **잘못된 값 입력**: [ERROR]로 시작하는 에러 메시지를 출력하고, 다시 입력을 받습니다. 자세한 예외 사항은 [입력 오류](#입력-오류)를 참고하세요.

### **출력**

- **방문 환영 문구 및 재고 현황 출력**
    - 환영 인사와 함께 상품명, 가격, 프로모션 이름, 재고가 안내됩니다. 만약 재고가 0개라면 `재고 없음`으로 출력됩니다.

```
안녕하세요. 우아24시 편의점🏪입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])

```

- **프로모션 적용 상품 안내**
    - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우, 혜택에 대한 안내 메시지가 출력됩니다.

```
현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
```

- **프로모션 적용 상품 재고 부족 안내**
    - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부에 대한 안내 메시지가 출력됩니다.

```
멤버십 할인을 받으시겠습니까? (Y/N)
```

- **영수증 내역, 금액 정보 안내**
    - 구매 상품 내역, 증정 상품 내역, 금액 정보가 출력됩니다.

```
===========W 편의점=============
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
===========증	정=============
콜라		1
==============================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000
```

- **추가 구매 여부 확인**
    - 추가 구매 여부를 확인하기 위한 안내 문구가 출력됩니다.

```
감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
```

### 멤버십 할인

- **멤버십 할인**
    - 멤버십 회원은 `프로모션 미적용 금액`의 30%를 할인받을 수 있습니다.
    - 프로모션 적용 후 남은 금액에 대해 멤버십 할인이 적용됩니다.
    - 멤버십 할인의 최대 한도는 `8,000원`입니다.

### 프로모션 적용

- **

&nbsp;

## 🚨 **예외 사항**

### **에러 코드표**

⚠️ 아래 코드표는 지속적으로 업데이트 될 예정입니다!

| Code | Message                                  |
|------|------------------------------------------|
| I001 | [ERROR] 파일이 비었습니다.                       |
| I002 | [ERROR] 리소스를 찾을 수 없습니다.                  |
| I003 | [ERROR] 수량을 확인해주세요                       |
| I004 | [ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요. |
| I004 | [ERROR] 숫자를 입력해주세요.                      |
| I005 | [ERROR] 잘못된 입력입니다.                       |
| I006 | [ERROR] 날짜 형식이 맞지 않습니다.                  |
| I007 | [ERROR] 입력이 비었습니다. 다시 확인해주세요.            |
| I008 | [ERROR] 다시 처음으로( 이건 미출력)                 |
| I009 | [ERROR] 잘못된 입력입니다. 다시 입력해 주세요.           |

| Code | Message                                     |
|------|---------------------------------------------|
| P001 | [ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.          |
| P002 | [ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요. |
| P003 | [ERROR] 현재 진행중인 프로모션이 없습니다.                 |
| P004 | [ERROR] 프로모션 이름을 찾을 수 없습니다.                 |

다음과 같은 경우 **예외**가 발생할 수 있습니다!

### **구매할 상품과 수량 형식이 올바르지 않은 경우**

- 상품 명이 일치하지 않는 경우
- 공백 및 빈값 입력
- 수량이 숫자가 아닌 경우
- 수량이 0이거나 음수인 경우:
- 수량이 재고 수량보다 많은 경우:
- [상품-수량]의 형식이 아닌 경우:
- 여러 제품 구매시 구분자인 쉼표(,)가 없거나 다른 경우:

### **Y/N 으로 입력에 대한 경우**

- Y 또는 N 이외의 응답일 경우: 각 상황에 맞는 에러 코드가 발생됩니다. (에러코드 표 참조)

예외 발생 시, `[ERROR]`로 시작하는 오류 메시지를 출력하고 다시 입력을 받습니다.

### 예외가 아닌 상황

&nbsp;

## 🤔 **회고**