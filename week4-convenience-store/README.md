## **편의점🏪**

**작성자 :** 이찬형  
**프로젝트** : 우아한 테크코스 프리코스 7기 - 4주차 과제
&nbsp;

## 📋 목차

- [📌 프로젝트 소개](#-프로젝트-소개)
- [📂 프로젝트 구조](#-프로젝트-구조)
- [🚀 기능](#-기능)
- [🖥️ 입출력 예시](#-입출력-예시)
    - [입력](#입력)
    - [출력](#출력)
    - [실행 결과 예시](#실행-결과-예시)
- [🚨 예외 사항](#-예외-사항)
    - [구입 금액 입력 오류](#구입-금액-입력-오류)
    - [당첨/보너스 번호 입력 오류](#당첨보너스-번호-입력-오류)
    - [예외가 아닌 상황](#예외가-아닌-상황)
- [🤔 회고](#-회고)

## 📌 **프로젝트 소개**

**구매자의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계사하고 안내하는 결제 시스템을 갖춘 편의점입니다.**

![Java Version](https://img.shields.io/badge/Java-21-blue?style=for-the-badge)  ![Gradle](https://img.shields.io/badge/build%20with-Gradle-green?style=for-the-badge)  
&nbsp;

## 📂 **프로젝트 구조**

⚠️ 아래 구조는 지속적으로 업데이트 될 예정입니다!

```
└── src
    ├── main
    │   ├── java
    │   │   └── store
    │   │       ├── Application.java
    │   │       ├── config
    │   │       │   ├── AppConfig.java
    │   │       │   └── DataInitializer.java
    │   │       ├── constants
    │   │       │   └── Delimiter.java
    │   │       ├── controller
    │   │       │   └── StoreController.java
    │   │       ├── entity
    │   │       │   ├── Product.java
    │   │       │   └── Promotion.java
    │   │       ├── exception
    │   │       │   ├── ApiException.java
    │   │       │   └── ErrorCode.java
    │   │       ├── file
    │   │       │   ├── InternalFile.java
    │   │       │   └── ResourceFileReader.java
    │   │       ├── repository
    │   │       │   ├── ProductRepository.java
    │   │       │   └── PromotionRepository.java
    │   │       ├── service
    │   │       │   ├── InputViewService.java
    │   │       │   ├── MembershipService.java
    │   │       │   ├── ProductService.java
    │   │       │   └── StoreService.java
    │   │       ├── util
    │   │       │   ├── DateUtil.java
    │   │       │   ├── FileUtil.java
    │   │       │   └── PurchaseProductParser.java
    │   │       ├── validator
    │   │       │   ├── DateValidator.java
    │   │       │   ├── PurchaseValidator.java
    │   │       │   └── YesNoValidator.java
    │   │       └── view
    │   │           ├── InputView.java
    │   │           ├── InventoryView.java
    │   │           └── OutputView.java
    │   └── resources
    │       ├── products.md
    │       └── promotions.md
    └── test
        └── java
            └── store
                ├── ApplicationTest.java
                ├── config
                │   └── DataInitializerTest.java
                ├── file
                │   ├── FileUtilTest.java
                │   └── ResourceFileReaderTest.java
                ├── product
                │   └── repository
                │       └── ProductRepositoryTest.java
                ├── validator
                │   └── PurchaseValidatorTest.java
                └── view
                    └── InventoryViewTest.java

    
├──README.md
├──build.gradle
```

&nbsp;

## 🚀 **기능**

### **입력**

- **구매할 상품, 수량 입력**
    - 구매할 상품과 수량을 입력합니다. 상품명, 수량은 하이픈(-)으로, 개별 상품은 대괄호([])로 묶어 쉼표(,)로 구분합니다.

```
[콜라-10],[사이다-3]
```

- **프로모션 적용 가능 상품**
    - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 그 수량만큼 추가 여부(Y/N)를 입력습니다.
    - Y: 증정 받을 수 있는 상품이 추가됩니다.
    - N: 증정 받을 수 있는 상품을 추가하지 않습니다.

```
Y
```

- **프로모션 재고 부족 시**
    - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부를 입력받습니다.
    - Y: 일부 수량에 대해 정가로 결제합니다.
    - N: 정가로 결제해야하는 수량만큼 제외한 후 결제를 진행합니다.

```
Y
```

- **멤버십 할인 적용 여부**
    - 멤버십 할인 적용 여부를 입력합니다.
    - Y: 멤버십 할인을 적용합니다.
    - N: 멤버십 할인을 적용하지 않습니다.

```
N
```

- **추가 구매 여부**
    - 추가 구매 여부를 입력합니다.
    - Y: 재고가 업데이트된 상품 목록을 확인 후 추가로 구매를 진행합니다.
    - N: 구매를 종료합니다.

```
N
```

- **잘못된 값 입력**: [ERROR]로 시작하는 에러 메시지를 출력하고, 다시 입력을 받습니다. 자세한 예외 사항은 [입력 오류](#입력-오류)를 참고하세요.

### **출력**

- **방문 환영 문구 및 재고 현황 출력**
    - 환영 인사와 함께 상품명, 가격, 프로모션 이름, 재고가 안내됩니다. 만약 재고가 0개라면 `재고 없음`으로 출력됩니다.

```
안녕하세요. 우아24시 편의점🏪입니다.
현재 보유하고 있는 상품입니다.

- 콜라 1,000원 10개 탄산2+1
- 콜라 1,000원 10개
- 사이다 1,000원 8개 탄산2+1
- 사이다 1,000원 7개
- 오렌지주스 1,800원 9개 MD추천상품
- 오렌지주스 1,800원 재고 없음
- 탄산수 1,200원 5개 탄산2+1
- 탄산수 1,200원 재고 없음
- 물 500원 10개
- 비타민워터 1,500원 6개
- 감자칩 1,500원 5개 반짝할인
- 감자칩 1,500원 5개
- 초코바 1,200원 5개 MD추천상품
- 초코바 1,200원 5개
- 에너지바 2,000원 5개
- 정식도시락 6,400원 8개
- 컵라면 1,700원 1개 MD추천상품
- 컵라면 1,700원 10개

구매하실 상품명과 수량을 입력해 주세요. (예: [사이다-2],[감자칩-1])

```

- **프로모션 적용 상품 안내**
    - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우, 혜택에 대한 안내 메시지가 출력됩니다.

```
현재 {상품명}은(는) 1개를 무료로 더 받을 수 있습니다. 추가하시겠습니까? (Y/N)
```

- **프로모션 적용 상품 재고 부족 안내**
    - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부에 대한 안내 메시지가 출력됩니다.

```
멤버십 할인을 받으시겠습니까? (Y/N)
```

- **영수증 내역, 금액 정보 안내**
    - 구매 상품 내역, 증정 상품 내역, 금액 정보가 출력됩니다.

```
===========W 편의점=============
상품명		수량	금액
콜라		3 	3,000
에너지바 		5 	10,000
===========증	정=============
콜라		1
==============================
총구매액		8	13,000
행사할인			-1,000
멤버십할인			-3,000
내실돈			 9,000
```

- **추가 구매 여부 확인**
    - 추가 구매 여부를 확인하기 위한 안내 문구가 출력됩니다.

```
감사합니다. 구매하고 싶은 다른 상품이 있나요? (Y/N)
```

### 멤버십 할인

- **멤버십 할인**
    - 멤버십 회원은 `프로모션 미적용 금액`의 30%를 할인받을 수 있습니다.
    - 프로모션 적용 후 남은 금액에 대해 멤버십 할인이 적용됩니다.
    - 멤버십 할인의 최대 한도는 `8,000원`입니다.

### 프로모션 적용

- **프로모션 할인**
    - 오늘 날짜가 프로모션 기간 내에 포함된 경우에만 할인을이 적용됩니다.
    - 1+1 또는 2+1 프로모션이 각각 지정된 상품에 적용되며, 동일 상품에 여러 프로모션이 적용되지 않습니다.
    - 프로모션 혜택은 프로모션 재고 내에서만 적용됩니다.
    - 프로모션 기간 중이라면 프로모션 재고를 우선적으로 차감하며, 프로모션 재고가 부족할 경우에는 일반 재고가 사용됩니다.
    - 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 필요한 수량을 추가로 가져오면 혜택을 받을 수 있는 안내가 제공됩니다.(단, 2+1일때는 1개가 부족할 때만 안내됩니다.)
    - 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제하게 됨을 안내됩니다.

&nbsp;

## 🚨 **예외 사항**

### **에러 코드표**

⚠️ 아래 코드표는 지속적으로 업데이트 될 예정입니다!

| Code | Message                                  |
|------|------------------------------------------|
| I001 | [ERROR] 파일이 비었습니다.                       |
| I002 | [ERROR] 리소스를 찾을 수 없습니다.                  |
| I003 | [ERROR] 수량을 확인해주세요                       |
| I004 | [ERROR] 올바르지 않은 형식으로 입력했습니다. 다시 입력해 주세요. |
| I004 | [ERROR] 숫자를 입력해주세요.                      |
| I005 | [ERROR] 잘못된 입력입니다.                       |
| I006 | [ERROR] 날짜 형식이 맞지 않습니다.                  |
| I007 | [ERROR] 입력이 비었습니다. 다시 확인해주세요.            |
| I008 | [ERROR] 다시 처음으로( 이건 미출력)                 |
| I009 | [ERROR] 잘못된 입력입니다. 다시 입력해 주세요.           |

| Code | Message                                     |
|------|---------------------------------------------|
| P001 | [ERROR] 존재하지 않는 상품입니다. 다시 입력해 주세요.          |
| P002 | [ERROR] 재고 수량을 초과하여 구매할 수 없습니다. 다시 입력해 주세요. |
| P003 | [ERROR] 현재 진행중인 프로모션이 없습니다.                 |
| P004 | [ERROR] 프로모션 이름을 찾을 수 없습니다.                 |

다음과 같은 경우 **예외**가 발생할 수 있습니다!

### **구매할 상품과 수량 형식이 올바르지 않은 경우**

- 상품 명이 일치하지 않는 경우.
- 공백 및 빈값 입력.
- 수량이 숫자가 아닌 경우.
- 수량이 0이거나 음수인 경우.
- 수량이 재고 수량보다 많은 경우.
- [상품-수량]의 형식이 아닌 경우.
- 여러 제품 구매시 구분자인 쉼표(,)가 없거나 다른 경우.

### **Y/N 으로 입력에 대한 경우**

- Y(y) 또는 N(n) 이외의 응답일 경우: 각 상황에 맞는 에러 코드가 발생됩니다. (에러코드 표 참조)

예외 발생 시, `[ERROR]`로 시작하는 오류 메시지를 출력하고 다시 입력을 받습니다.

### 예외가 아닌 상황

- 괄호와 구분자 사이사이 공백(space)이 있는 경우.
- y와 n으로 소문자일 경우.
  &nbsp;

## 🤔 **회고**

- 지원서나 중간 회고에서 현실적인 목표를 설정하고 이를 달성했다고 생각하나요? 그 이유는 무엇인가요?
    - 3주차까지는 정말 차근차근 잘 진행했다고 생각했으나 4주차의 목표를 충분히 달성하지 못했다고 생각합니다. 그 이유는 가장 중요한 기능인 '돌아가는 쓰레기'를 완성하지 못한 점입니다. 기능이 동작한다고
      하더라도, 준비된 모든 테스트를 통과하지 못한다면 결과적으로 완전하지 않다고 느끼기 때문입니다. 현실적인 목표를 세우고 접근했지만, 과제의 난이도가 예상보다 높아 어려움을 겪었습니다. 그 결과, 목표
      달성에
      실패하게 되었습니다.

&nbsp;

- 중간 회고에서 조정한 목표가 실제 목표 달성에 도움이 되었나요? 목표를 달성하는 데 어떤 점이 효과적이었다고 생각하나요?
    - 중간 회고에서 세운 목표들이 이번 4주차 코드 작성에 반도 녹여내지 못한 것 같습니다. 기능적인 설계를 어떻게 해야 할지에 대한 고민이 많았고, 이를 해결하는 데 많은 시간이 소요되었습니다. 기능 단위로
      세부적으로 진행해야 한다는 점을 인지하고 있었음에도 불구하고, 과제 진행 중에 얽혀있는 다양한 문제들을 효과적으로 풀어내지 못하고 마감 기한이 다가올수록점점 책임 분리가 안되고 코드가 중복되는 현상이
      발생했습니다. 하지만 목표로 삼았던 기초적인 공통 사항들에 대해서는 확실히 더 익숙해지는 시간이 되었습니다.

&nbsp;

- 각 미션의 목표를 달성하기 위해 세운 계획을 잘 이행했나요? 그 과정에서 어떤 전략이 효과가 있었나요?
    - 설계 단계에서 많은 시간과 자원을 소모했고, 기능 구현 과정에서 예상치 못한 문제들이 겹치면서 진행이 지체되었습니다. 기능 단위로 나누어 작은
      목표를 설정하고 접근하는 전략이 효과적이었지만, 각 단계에서의 예상치 못한 문제 해결이 늦어지면서 전반적인 목표 달성에 영향을 미쳤습니다.

&nbsp;

- 몰입하고 함께 성장하는 과정을 통해 인상 깊었던 경험이나 변화가 있었나요?
    - 이번 기간 동안 스프링 부트와 다양한 외부 라이브러리를 사용하면서 이전에 고려하지 않았던 객체 지향적인 사고를 이해하게 되는 기회를 가졌습니다. 기존에 급급하게 개발을 배우던 때에는 몰랐던 원리들을
      차근차근 눈여겨 볼 수 있는 시간이었습니다. 짧은 기간 동안 집중하고 몰입할 수 있는 경험은 정말 짜릿(?)했습니다. 이러한 과정에서 설계의 중요성을 정말 많이 깨달았고 단위 테스트를 어떻게 쪼개서
      하는지가 곧 설계라는 것 또한 배웠습니다. 4주간의 경험은 제 개발 인생에 있어서 큰 자양분이 될 것임을 확신합니다. 개발자라면 어떻게 나아가야 하는지에 대해 정말 많이 배웠습니다. 감사하다는 말씀 드리며
      4주동안 고생 많이 하셨습니다.

&nbsp;

- 4주차 소감
    - 너무너무너무 아쉽습니다. 주어진 부분에 대해 설계와 서로 얽혀있는 것들을 풀어내는 데 많은 시간을 소비했습니다. 처음에는 데이터를 불러와 외부 경로의 파일들은 어떻게 확장할까에 대한 부분, 도메인을
      나눈다면 나중에 어떻게 확장될까 하며 고민하며 코드를 작성했습니다. 하지만 (결국 `돌아가는 쓰레기`를 만들기 위해 수정했지만...) 몇날 며칠 밤을 새가며 정말 고민하고 마지막까지 후회없이 진행했다고는
      생각하지만,
      준비된 예제 테스트를 다 통과하지 못하여 점점 스파게티 코드처럼 되어간 부분도 너무 아쉬웠습니다. 조금만 얽혀있어도 머리에서 많이 꼬여버리는 상황에 답답함도 있었습니다. 시간이 다가올수록 문제를 먼저
      해결해야겠다는 생각을 하게 되면서 점점 정해진
      가이드를 못 맞춘 것에 대한 점도 아쉽습니다.
      3주차때 의존성 관리를 한곳에 하면서 인지하지 못했는데 이번에 수많은 클래스들을 관리하려다보니 의존성의 순서와 순환참조 문제들을 맞닥드리게 되었습니다. 이 부분도 상당히
      정말 너무 함께하고 싶었기에 아쉽다는 말이 계속 반복되는 것 같습니다. 결과가 어떻게 되었든 4주동안 정말 많이 성장했다고 생각하고 생각합니다.
      갑자기 푸념이 되어버린 것 같습니다. 그만큼 함께하고 싶었던 것 같습니다. 